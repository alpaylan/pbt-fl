{
    "setup_steps": [
        {
            "Command": {
                "command": "cargo",
                "args": [
                    "install",
                    "--git",
                    "https://github.com/alpaylan/crabcheck",
                    "crabcheck",
                    "--bin",
                    "crabcheck-profiling-analysis"
                ]
            }
        },
        {
            "Command": {
                "command": "cargo",
                "args": [
                    "install",
                    "--git",
                    "https://github.com/alpaylan/crabcheck",
                    "crabcheck",
                    "--bin",
                    "crabcheck-profiling-demangler"
                ]
            }
        },
        {
            "Command": {
                "command": "llvm-cov",
                "args": [
                    "-h"
                ],
                "mitigation": "Please install llvm-cov from https://llvm.org/"
            }
        }
    ],
    "build_steps": [
        {
            "Command": {
                "env": {
                    "CARGO_INCREMENTAL": "0",
                    "RUSTFLAGS": "-C instrument-coverage -C link-dead-code -C codegen-units=1 -C inline-threshold=0 -C llvm-args=-inline-threshold=0 -C debuginfo=2"
                },
                "command": "cargo",
                "args": [
                    "build",
                    "--release"
                ],
                "run_at": "${workload_path}"
            }
        }
    ],
    "test_steps": [
        {
            "Command": {
                "env": {
                    "LLVM_PROFILE_FILE": "coverage/snapshot_%p-%m.profraw"
                },
                "command": "./target/release/faultloc",
                "args": [
                    "${strategy}",
                    "${property}",
                    "${tests}"
                ],
                "run_at": "${workload_path}"
            }
        },
        {
            "Command": {
                "command": "./instrumentation.sh",
                "run_at": "${workload_path}"
            }
        },
        {
            "Command": {
                "command": "crabcheck-profiling-analysis",
                "args": [
                    "coverage"
                ],
                "run_at": "${workload_path}"
            }
        }
    ]
}